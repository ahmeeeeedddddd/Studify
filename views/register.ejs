<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body id="enhanced-register-page">
    <div class="background-overlay"></div>
    
    <div class="form-container">
        <div class="form-card">
            <h1>Create Account</h1>
            
            <!-- Social Media Login Options -->
            <div class="social-login">
            <a href="/auth/facebook" class="social-btn facebook">
            <i class="fab fa-facebook-f"></i>
            </a>
                
            <a href="/auth/google" class="social-btn google">
               <i class="fab fa-google"></i>
            </a>

            <a href="/auth/linkedin" class="social-btn linkedin">
            <i class="fab fa-linkedin-in"></i>
            </a>
            </div>
            
            <p class="divider-text">Or use your email for registration</p>
            
            <!-- Registration Form -->
            <form action="/register" method="POST" class="register-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" name="name" placeholder="Name" required>
                </div>
                
                <div class="input-group">
                    <i class="fas fa-envelope"></i>
                    <input type="email" name="email" placeholder="Email" required>
                </div>
                
                <div class="input-group password-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="password" id="password" placeholder="Password" required>
                    <button type="button" class="password-toggle" id="togglePassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <div class="password-strength" id="passwordStrength" style="display: none;">
                    <div class="strength-bar">
                        <div class="strength-progress" id="strengthProgress"></div>
                    </div>
                    <div class="strength-text">
                        <span id="strengthLabel">Weak</span>
                        <div class="strength-requirements">
                            <span class="requirement" id="lengthReq">8+ chars</span>
                            <span class="requirement" id="upperReq">A-Z</span>
                            <span class="requirement" id="numberReq">0-9</span>
                            <span class="requirement" id="specialReq">!@#</span>
                        </div>
                    </div>
                </div>
                
                <div class="input-group password-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Re-password" required>
                    <button type="button" class="password-toggle" id="toggleConfirmPassword">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <button type="submit" class="submit-btn" id="submitBtn">Sign Up</button>
            </form>
            
            <p class="signin-link">
                Already have an account? <a href="/signin">Sign In</a>
            </p>
        </div>
    </div>
    
    <script>
        // Password visibility toggles
        function setupPasswordToggle(toggleId, inputId) {
            const toggle = document.getElementById(toggleId);
            const input = document.getElementById(inputId);
            
            toggle.addEventListener('click', function() {
                const icon = this.querySelector('i');
                if (input.type === 'password') {
                    input.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        }

        // Setup password toggles
        setupPasswordToggle('togglePassword', 'password');
        setupPasswordToggle('toggleConfirmPassword', 'confirmPassword');

        // Password strength checker
        const passwordInput = document.getElementById('password');
        const strengthContainer = document.getElementById('passwordStrength');
        const strengthProgress = document.getElementById('strengthProgress');
        const strengthLabel = document.getElementById('strengthLabel');
        const lengthReq = document.getElementById('lengthReq');
        const upperReq = document.getElementById('upperReq');
        const numberReq = document.getElementById('numberReq');
        const specialReq = document.getElementById('specialReq');
        const submitBtn = document.getElementById('submitBtn');

        function checkPasswordStrength(password) {
            const requirements = {
                length: password.length >= 8,
                upper: /[A-Z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[!@#$%^&*(),.?":{}|<>]/.test(password)
            };

            // Update requirement indicators
            lengthReq.classList.toggle('met', requirements.length);
            upperReq.classList.toggle('met', requirements.upper);
            numberReq.classList.toggle('met', requirements.number);
            specialReq.classList.toggle('met', requirements.special);

            // Calculate strength
            const metRequirements = Object.values(requirements).filter(Boolean).length;
            let strength = 'weak';
            let strengthClass = 'weak';

            if (metRequirements === 1) {
                strength = 'Weak';
                strengthClass = 'weak';
            } else if (metRequirements === 2) {
                strength = 'Fair';
                strengthClass = 'fair';
            } else if (metRequirements === 3) {
                strength = 'Good';
                strengthClass = 'good';
            } else if (metRequirements === 4) {
                strength = 'Strong';
                strengthClass = 'strong';
            }

            // Update strength indicator
            strengthProgress.className = `strength-progress ${strengthClass}`;
            strengthLabel.textContent = strength;

            return metRequirements >= 3; // Consider strong if 3+ requirements met
        }

        passwordInput.addEventListener('input', function() {
            const password = this.value;
            
            if (password.length > 0) {
                strengthContainer.style.display = 'block';
                const isStrong = checkPasswordStrength(password);
            } else {
                strengthContainer.style.display = 'none';
            }
        });

        // Form submission with validation
        document.querySelector('.register-form').addEventListener('submit', function(e) {
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (password !== confirmPassword) {
                e.preventDefault();
                alert('Passwords do not match!');
                return;
            }

            // Check password strength
            const requirements = {
                length: password.length >= 8,
                upper: /[A-Z]/.test(password),
                number: /[0-9]/.test(password),
                special: /[!@#$%^&*(),.?":{}|<>]/.test(password)
            };

            const metRequirements = Object.values(requirements).filter(Boolean).length;
            
            if (metRequirements < 3) {
                e.preventDefault();
                alert('Password must meet at least 3 of the 4 requirements for better security!');
                return;
            }

            // Form will submit normally to /register route
        });
    </script>
</body>
</html>